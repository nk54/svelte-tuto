---
import PrimaryLayout from "@/layouts/PrimaryLayout.astro";
import { Two } from "@/components/two";
---

<PrimaryLayout>
  <div class="flex flex-col gap-4 m-12">
    <h1 class="font-bold text-3xl">Pattern 2 : Derived Store (Classic)</h1>
    <p class="text-muted-foreground text-lg">
      Utilise les stores Svelte classiques avec <code>writable()</code> et <code>derived()</code>. 
      Les composants s'abonnent automatiquement via la syntaxe <code>$store</code>. 
      Pattern Ã©prouvÃ© et familier pour les dÃ©veloppeurs Svelte, parfait pour partager l'Ã©tat entre composants non liÃ©s.
    </p>
    <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
      <p class="mb-2 font-semibold text-sm">ğŸ”„ Ã‰quivalents dans d'autres frameworks :</p>
      <ul class="space-y-1 text-sm">
        <li><strong>React :</strong> Redux (createStore + selectors)</li>
        <li><strong>Vue :</strong> Pinia stores avec computed</li>
        <li><strong>Angular :</strong> RxJS BehaviorSubject + combineLatest</li>
        <li><strong>POO :</strong> Pattern Publish/Subscribe (IObservable en .NET, Observable en Java)</li>
      </ul>
    </div>
    <div class="bg-purple-50 dark:bg-purple-900/20 p-4 border border-purple-200 dark:border-purple-800 rounded-lg">
      <p class="mb-2 font-semibold text-purple-900 dark:text-purple-100 text-sm">âœ… Utilisez ce pattern si :</p>
      <ul class="space-y-1 text-purple-800 dark:text-purple-200 text-sm">
        <li>âœ“ Vous maintenez une <strong>app Svelte 3/4 existante</strong></li>
        <li>âœ“ Vous voulez un <strong>Ã©tat global partagÃ©</strong> entre composants distants</li>
        <li>âœ“ Vous Ãªtes familier avec <strong>Redux/Pinia</strong></li>
        <li>âœ“ Vous avez besoin de <strong>valeurs dÃ©rivÃ©es</strong> complexes</li>
        <li>âœ“ âš ï¸ <em>Note : Pour Svelte 5, prÃ©fÃ©rez le Pattern 3 (Store Runes)</em></li>
      </ul>
    </div>
    <div class="bg-red-50 dark:bg-red-900/20 p-4 border border-red-200 dark:border-red-800 rounded-lg">
      <p class="mb-2 font-semibold text-red-900 dark:text-red-100 text-sm">âŒ N'utilisez pas ce pattern si :</p>
      <ul class="space-y-1 text-red-800 dark:text-red-200 text-sm">
        <li>âœ— Vous dÃ©marrez un <strong>nouveau projet Svelte 5</strong> (utilisez Pattern 3 Ã  la place)</li>
        <li>âœ— Vous voulez bÃ©nÃ©ficier de la <strong>rÃ©activitÃ© fine-grained</strong> de Svelte 5</li>
        <li>âœ— Vous avez besoin de <strong>plusieurs instances</strong> du mÃªme Ã©tat (prÃ©fÃ©rez Pattern 5)</li>
        <li>âœ— Vous voulez un <strong>contrÃ´le explicite</strong> sur qui accÃ¨de au store</li>
        <li>âœ— Vous recherchez les <strong>derniÃ¨res optimisations</strong> de performance</li>
      </ul>
    </div>
    <Two client:load />
  </div>
</PrimaryLayout>
