---
import PrimaryLayout from "@/layouts/PrimaryLayout.astro";
import { App } from "@/components/poc/four";
---

<PrimaryLayout>
  <div class="flex flex-col gap-4 m-12">
    <h1 class="font-bold text-3xl">Pattern 4 : Context API</h1>
    <p class="text-muted-foreground text-lg">
      Utilise <code>setContext()</code> et <code>getContext()</code> pour partager l'Ã©tat dans l'arbre des composants. 
      Ã‰vite le prop drilling en permettant aux composants descendants d'accÃ©der directement au contexte. 
      Excellent pour les fonctionnalitÃ©s qui nÃ©cessitent un Ã©tat partagÃ© dans une sous-arborescence spÃ©cifique.
    </p>
    <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
      <p class="mb-2 font-semibold text-sm">ğŸ”„ Ã‰quivalents dans d'autres frameworks :</p>
      <ul class="space-y-1 text-sm">
        <li><strong>React :</strong> Context API (createContext + useContext)</li>
        <li><strong>Vue :</strong> provide/inject</li>
        <li><strong>Angular :</strong> Dependency Injection avec services scoped</li>
        <li><strong>Flutter :</strong> InheritedWidget</li>
        <li><strong>POO :</strong> Pattern Dependency Injection (IServiceProvider en .NET, Spring @Scope en Java)</li>
      </ul>
    </div>
    <div class="bg-purple-50 dark:bg-purple-900/20 p-4 border border-purple-200 dark:border-purple-800 rounded-lg">
      <p class="mb-2 font-semibold text-purple-900 dark:text-purple-100 text-sm">âœ… Utilisez ce pattern si :</p>
      <ul class="space-y-1 text-purple-800 dark:text-purple-200 text-sm">
        <li>âœ“ Vous crÃ©ez une <strong>UI library</strong> ou composants rÃ©utilisables</li>
        <li>âœ“ Vous gÃ©rez des <strong>thÃ¨mes, langues, configurations</strong> dans un sous-arbre</li>
        <li>âœ“ Vous voulez Ã©viter le prop drilling <strong>sans Ã©tat global</strong></li>
        <li>âœ“ L'Ã©tat est <strong>scopÃ© Ã  une partie</strong> de l'arbre (ex: modal, wizard)</li>
        <li>âœ“ Vous voulez un couplage <strong>implicite mais contrÃ´lÃ©</strong></li>
      </ul>
    </div>
    <div class="bg-red-50 dark:bg-red-900/20 p-4 border border-red-200 dark:border-red-800 rounded-lg">
      <p class="mb-2 font-semibold text-red-900 dark:text-red-100 text-sm">âŒ N'utilisez pas ce pattern si :</p>
      <ul class="space-y-1 text-red-800 dark:text-red-200 text-sm">
        <li>âœ— Vous voulez un <strong>Ã©tat vraiment global</strong> partagÃ© dans toute l'app (utilisez Pattern 3)</li>
        <li>âœ— Vous avez besoin d'un <strong>contrÃ´le explicite</strong> via props (utilisez Pattern 1 ou 5)</li>
        <li>âœ— Les composants enfants ne sont <strong>pas dans l'arbre de rendu</strong> du parent</li>
        <li>âœ— Vous trouvez le couplage <strong>implicite difficile Ã  dÃ©bugger</strong></li>
        <li>âœ— Vous voulez <strong>tester les composants isolÃ©ment</strong> sans setup de contexte</li>
      </ul>
    </div>
    <App client:load />
  </div>
</PrimaryLayout>
