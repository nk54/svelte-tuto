---
import PrimaryLayout from "@/layouts/PrimaryLayout.astro";

const poc = [
  { 
    name: "Four - Props + Callbacks", 
    path: "poc-four", 
    complexity: "‚≠ê Simple",
    description: "Pattern le plus simple : le composant parent g√®re l'√©tat avec $state et passe les donn√©es via props aux enfants. Les enfants remontent les changements via callbacks. Id√©al pour les petites applications.",
    techDetails: "√âtat local dans parent, props descendantes, callbacks remontants"
  },
  { 
    name: "Eight - Derived Store", 
    path: "poc-eight", 
    complexity: "‚≠ê‚≠ê Mod√©r√©",
    description: "Pattern Svelte classique (v3/4) utilisant writable() et derived(). Les composants s'abonnent automatiquement avec la syntaxe $. √âtat global partag√© entre composants sans prop drilling.",
    techDetails: "writable, derived, auto-subscription avec $"
  },
  { 
    name: "Three - Store (Runes)", 
    path: "poc-three", 
    complexity: "‚≠ê‚≠ê Mod√©r√©",
    description: "Store moderne avec les nouvelles runes Svelte 5 ($state, $derived). Encapsule l'√©tat dans une fonction qui retourne des getters r√©actifs. Alternative moderne aux stores classiques.",
    techDetails: "$state, $derived, fonction factory, getters"
  },
  { 
    name: "Six - Context API", 
    path: "poc-six", 
    complexity: "‚≠ê‚≠ê‚≠ê Interm√©diaire",
    description: "Utilise setContext/getContext pour partager l'√©tat dans l'arbre de composants. √âvite le prop drilling en rendant les donn√©es disponibles √† tous les descendants sans passage explicite de props.",
    techDetails: "setContext, getContext, contexte implicite"
  },
  { 
    name: "Seven - Composable/Hook", 
    path: "poc-seven", 
    complexity: "‚≠ê‚≠ê‚≠ê Interm√©diaire",
    description: "Pattern inspir√© de React hooks et Vue composables. Fonction useFilters() r√©utilisable qui retourne √©tat et m√©thodes. Excellente r√©utilisabilit√© et composition de logiques.",
    techDetails: "Fonction composable, retour d'objet r√©actif, pattern hooks"
  },
  { 
    name: "Five - Classe .svelte.ts", 
    path: "poc-five", 
    complexity: "‚≠ê‚≠ê‚≠ê‚≠ê Avanc√©",
    description: "Approche orient√©e objet avec une classe TypeScript utilisant les runes. Encapsulation compl√®te de la logique m√©tier. Permet d'instancier plusieurs gestionnaires ind√©pendants. Tr√®s testable.",
    techDetails: "Classe ES6, $state/$derived, m√©thodes publiques, instanciable"
  },
  { 
    name: "Nine - Render Props/Slots", 
    path: "poc-nine", 
    complexity: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Expert",
    description: "Pattern avanc√© utilisant les Snippets Svelte 5 pour l'inversion de contr√¥le. Le composant FilterProvider expose l'√©tat via un slot avec props. Maximum de flexibilit√© et d√©couplage.",
    techDetails: "Snippet, render props, inversion de contr√¥le, slot props"
  },
];
---

<PrimaryLayout>
  <div class="place-self-center">
    <div class="flex flex-col mx-auto mb-20 p-4 max-w-5xl">
      <h1 class="mb-6 font-bold text-4xl">Patterns de Gestion d'√âtat - Svelte 5</h1>
      
      <div class="bg-blue-50 dark:bg-blue-900/20 mb-8 p-4 rounded-lg">
        <h2 class="mb-2 font-semibold text-xl">üéØ 7 Approches Compar√©es</h2>
        <p class="text-gray-700 dark:text-gray-300 text-sm">
          D√©monstration de 7 patterns pour g√©rer l'√©tat et le filtrage de donn√©es, du plus simple au plus avanc√©.
          Chaque impl√©mentation r√©sout le m√™me probl√®me : filtrer une liste d'items par cat√©gorie.
        </p>
      </div>

      <div class="space-y-4">
        {
          poc.map((item) => (
            <a
              href={`/poc/${item.path}`}
              class="block hover:shadow-lg p-5 border hover:border-blue-400 dark:hover:border-blue-600 rounded-xl transition-all"
            >
              <div class="flex justify-between items-start mb-2">
                <h3 class="font-bold text-blue-600 dark:text-blue-400 text-xl hover:underline">
                  {item.name}
                </h3>
                <span class="bg-gray-100 dark:bg-gray-800 ml-4 px-3 py-1 rounded-full font-medium text-xs whitespace-nowrap">
                  {item.complexity}
                </span>
              </div>
              <p class="mb-2 text-gray-700 dark:text-gray-300 text-sm leading-relaxed">
                {item.description}
              </p>
              <p class="font-mono text-gray-500 dark:text-gray-400 text-xs">
                üí° {item.techDetails}
              </p>
            </a>
          ))
        }
      </div>

      <div class="bg-gradient-to-r from-purple-50 dark:from-purple-900/20 to-blue-50 dark:to-blue-900/20 mt-8 p-6 border border-purple-200 dark:border-purple-800 rounded-xl">
        <h3 class="mb-3 font-bold text-purple-900 dark:text-purple-100 text-xl">
          üìñ Documentation Compl√®te
        </h3>
        <p class="mb-3 text-gray-700 dark:text-gray-300 text-sm">
          Pour une analyse d√©taill√©e avec tableaux comparatifs, avantages/inconv√©nients et recommandations par cas d'usage :
        </p>
        <a 
          href="/PATTERNS_COMPARISON.md" 
          class="inline-block bg-purple-600 hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600 px-4 py-2 rounded-lg font-semibold text-white text-sm transition-colors"
        >
          üìÑ Voir PATTERNS_COMPARISON.md
        </a>
      </div>
    </div>
  </div>
</PrimaryLayout>
