---
import PrimaryLayout from "@/layouts/PrimaryLayout.astro";
import { Three } from "@/components/poc/three";
---

<PrimaryLayout>
  <div class="flex flex-col gap-4 m-12">
    <h1 class="font-bold text-3xl">Pattern 3 : Store avec Runes â­ RECOMMANDÃ‰</h1>
    <p class="text-muted-foreground text-lg">
      Modernise le pattern store avec les runes Svelte 5 (<code>$state</code>, <code>$derived</code>). 
      Une factory function retourne un objet avec des getters rÃ©actifs. 
      Combine la puissance des stores avec la syntaxe moderne des runes pour une rÃ©activitÃ© fine-grained.
    </p>
    <div class="bg-green-50 dark:bg-green-900/20 p-4 border-2 border-green-500 rounded-lg">
      <p class="mb-2 font-semibold text-sm">ğŸ”„ Ã‰quivalents dans d'autres frameworks :</p>
      <ul class="space-y-1 text-sm">
        <li><strong>React :</strong> Zustand avec selectors</li>
        <li><strong>Vue 3 :</strong> Composition API (ref + computed dans composable)</li>
        <li><strong>Angular 16+ :</strong> Signals</li>
        <li><strong>POO :</strong> Module Pattern + Reactive Extensions (Rx.NET, RxJava)</li>
        <li><strong>Autre :</strong> Fine-grained reactivity comme SolidJS</li>
      </ul>
    </div>
    <div class="bg-purple-50 dark:bg-purple-900/20 p-4 border border-purple-200 dark:border-purple-800 rounded-lg">
      <p class="mb-2 font-semibold text-purple-900 dark:text-purple-100 text-sm">âœ… Utilisez ce pattern si :</p>
      <ul class="space-y-1 text-purple-800 dark:text-purple-200 text-sm">
        <li>âœ“ Vous voulez un <strong>Ã©tat global</strong> partagÃ©</li>
        <li>âœ“ Plusieurs composants <strong>non liÃ©s</strong> doivent accÃ©der aux mÃªmes donnÃ©es</li>
        <li>âœ“ Vous avez <strong>une seule instance</strong> (ex: prÃ©fÃ©rences utilisateur, thÃ¨me, panier)</li>
        <li>âœ“ Vous voulez Ã©viter le prop drilling</li>
        <li>âœ“ Vous utilisez <strong>Svelte 5</strong> et voulez la syntaxe moderne</li>
      </ul>
    </div>
    <div class="bg-red-50 dark:bg-red-900/20 p-4 border border-red-200 dark:border-red-800 rounded-lg">
      <p class="mb-2 font-semibold text-red-900 dark:text-red-100 text-sm">âŒ N'utilisez pas ce pattern si :</p>
      <ul class="space-y-1 text-red-800 dark:text-red-200 text-sm">
        <li>âœ— Vous avez besoin de <strong>plusieurs instances indÃ©pendantes</strong> du mÃªme Ã©tat</li>
        <li>âœ— L'Ã©tat doit Ãªtre <strong>scopÃ© localement</strong> Ã  un composant ou une section</li>
        <li>âœ— Vous voulez un <strong>contrÃ´le explicite</strong> via props sur qui accÃ¨de Ã  quoi</li>
        <li>âœ— Vous construisez un composant <strong>hautement rÃ©utilisable</strong> (prÃ©fÃ©rez Pattern 5 ou 7)</li>
        <li>âœ— Vous Ãªtes encore sur <strong>Svelte 3/4</strong> (utilisez Pattern 2 Ã  la place)</li>
      </ul>
    </div>
    <Three client:load />
  </div>
</PrimaryLayout>
